<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    	<link th:href="@{css/dashboard-ordini.css}" rel="stylesheet">
    <title>Document</title>
</head>
<body>
    <h1>Lista Ordini</h1>
    <div class="product-grid">
        <div class="product-item" th:each="product : ${products}">
            <img th:src="@{${product.image}}" alt="Prodotto" />
            <h3 th:text="${product.name}">Nome Prodotto</h3>
            <p th:text="${product.description}">Descrizione del prodotto</p>
            <p th:text="'Prezzo: $' + ${product.price}">Prezzo</p>
        </div>
    </div>
    <a th:href="@{/dashboard-admin}">Admin</a>
    <a th:href="@{/dashboard-catalogo}">Catalogo</a>
    <a th:href="@{/dashboard-utenti}">Utenti</a>
    <div class="row mt-4 ">
				<div class="col-10 mx-auto">
				<label for="cars">Filtra per cliente:</label>
				<form method="post" action="dashboard-ordini/filtra" >
					<!-- <select>
				  		<option th:each="u : ${utenti}" th:value="${u.id}" th:text="${u.nome} + ' ' + ${u.cognome}"></option>
				  
					</select>  -->
					<input type="submit" value="Filtra">
				</form>
					<table class="table table-striped table-responsive">
						<thead>
							<tr>
								<th th:text="'Data Ordine'"></th>
								<th th:text="'Importo Ordine'"></th>
								<th th:text="'Nome Cliente'"></th>
								<th th:text="'Cognome Cliente'"></th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="o : ${ordini}">
								<td th:text="${#temporals.format(o.data, 'dd-MM-yyyy')}"></td>
								<td th:text="'Euro ' + ${#numbers.formatDecimal(o.importo,0,'POINT',2,'COMMA')}"></td>
								<td th:text="${o.utente.nome}"></td>
								<td th:text="${o.utente.cognome}"></td>
								<td class="text-end">
									<a th:href="@{/dashboard-ordini(id=${o.id})}" 
										class="btn btn-primary btn-sm" th:text="'Selezione'"></a>
								</td>
								
							</tr>
						</tbody>
					</table>
					<div th:if="${selezionato}">
					<h4 th:text="'Ordine del ' + ${ordine.data} + ' del cliente ' + ${ordine.utente.nome} + ' ' 
						+ ${ordine.utente.cognome} + '.'"></h4>
					<br>
					<table >
						<thead>
							<tr>
								<th th:text="'Nome Prodotto'"></th>
								<th th:text="'QuantitÃ '"></th>
								<th th:text="'Importo'"></th>
								
							</tr>
						</thead>
						<tbody>
							
							<tr th:each="p : ${prodotti.keySet()}">
								<td th:text="${p.descrizione}"></td>
								<td th:text="${prodotti.get(p)}"></td>
								<td th:text="${#numbers.formatDecimal((p.prezzo * prodotti.get(p)),0,'POINT',2,'COMMA')} + ' Euro.'"></td>						
							</tr>
						</tbody>
					</table>
					<br>
					<h5 th:text="'Importo complessivo: ' + ${#numbers.formatDecimal(ordine.importo,0,'POINT',2,'COMMA')} + ' Euro.'"></h5>					
					</div>
				</div>
				<div class="col-1"></div>
				<div class="col-4">
				</div>
			</div>
    
</body>
</html>
